# üßÆ –£—Å—Ç–∞–≤—à–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –æ—Ç –ü–∞–≤–ª–∞ (Tired Calc)

![–°–∫—Ä–∏–Ω—à–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞](imgs/img2.png)

–ü—Ä–∏–≤–µ—Ç, –±—Ä–∞—Ç—É—Ö–∞!  
–≠—Ç–æ—Ç —Ä–∏–¥–º–∏ –ø–∏—à–µ—Ç **–æ—á–µ–Ω—å —É—Å—Ç–∞–≤—à–∏–π –ü–∞–≤–µ–ª**, –Ω–æ –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —É—Å—Ç–∞–ª–æ—Å—Ç—å, —è –±—É–¥—É —Ä–∞–¥, –µ—Å–ª–∏ —Ç–µ–±–µ –ø–æ–Ω—Ä–∞–≤–∏—Ç—Å—è –º–æ–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä.

> ‚ÑπÔ∏è **–°–≤—è–∑—å —Å–æ –º–Ω–æ–π:** –ø–∏—à–∏ –≤ Telegram ‚Äî [@PvlKud](https://t.me/PvlKud)  
> ‚úÖ **–ï—Å—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å!** –ù–µ –ø–∞—Ä—å—Å—è —Å curl, –ø—Ä–æ—Å—Ç–æ —é–∑–∞–π –µ–≥–æ ‚Äî –æ–Ω –Ω–∞ —Ñ–æ—Ç–æ –≤—ã—à–µ.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üóÉÔ∏è –•—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–π –≤ SQLite (—á–µ—Ä–µ–∑ GORM) ‚Äî **–ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É**
- üîó –ê–≥–µ–Ω—Ç –∏ –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –æ–±—â–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ **gRPC**
- üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ **JWT**
- üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç **—Ç–æ–ª—å–∫–æ —Å–≤–æ–∏** –≤—ã—Ä–∞–∂–µ–Ω–∏—è
- üß† –í—ã—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –ø–æ–ª—É—á–∞—Ç—å **—Ç–æ–ª—å–∫–æ –±—É–¥—É—á–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º**

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤—Ä—É—á–Ω—É—é

### üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go **v1.20.0+**
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`zap`, `gorm` –∏ –¥—Ä.)

### üõ†Ô∏è –®–∞–≥–∏

1. –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

   ```bash
   git clone https://github.com/PavelFr8/Golang-Calc.git
   cd Golang-Calc
   ```

2. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

   ```bash
   go mod tidy
   ```

3. –°–∫–æ–ø–∏—Ä—É–π —Ñ–∞–π–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:

   **Linux/Mac:**

   ```bash
   cp example.env .env
   ```

   **Windows:**

   ```bash
   copy example.env .env
   ```

4. –ó–∞–ø—É—Å—Ç–∏ **–∞–≥–µ–Ω—Ç**:

   ```bash
   go run ./cmd/agent/main.go
   ```

5. –í **–æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ** –∑–∞–ø—É—Å—Ç–∏ **–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä**:

   ```bash
   go run ./cmd/orchestrator/main.go
   ```

> ‚úÖ –ß–µ—Ä–µ–∑ –ø–∞—Ä—É —Å–µ–∫—É–Ω–¥ –≤—Å—ë –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ [http://localhost:8080](http://localhost:8080)

---

## üê≥ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

> ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è Docker –¥–ª—è **WSL**. –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ ‚Äî –ø–æ–ø—Ä–æ–±—É–π –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë: `docker system prune -a --volumes`

1. –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

   ```bash
   git clone https://github.com/PavelFr8/Golang-Calc.git
   cd Golang-Calc
   ```

2. –°–æ–±–µ—Ä–∏ –∏ –∑–∞–ø—É—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

   ```bash
   docker-compose build
   docker-compose up
   ```

> ‚úÖ –ß–µ—Ä–µ–∑ –ø–∞—Ä—É —Å–µ–∫—É–Ω–¥ –≤—Å—ë –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ [http://localhost:8080](http://localhost:8080)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

> ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–æ–¥—É–ª—å–Ω—ã–µ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

> `handlers_test.go` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ü–µ–ª–∏–∫–æ–º –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

> `agemt_mock_test.go` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ü–µ–ª–∏–∫–æ–º –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã –ê–≥–µ–Ω—Ç–∞(–í –¥–∞–Ω–Ω–æ–º —Ç–µ—Å—Ç–µ –æ—Ä–∫–µ—Å—Ç–∞—Ä—Ç–æ—Ä –ø–æ–¥–º–µ–Ω—è–µ—Ç—Å—è —Ñ–µ–π–∫–æ–≤—ã–º mock-—Å–µ—Ä–≤–µ—Ä–æ–º)

> –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –º–æ–¥—É–ª—å–Ω—ã–µ –∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ä–∞–±–æ—Ç—É –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π –∏ —Ñ—É–Ω–∫—Ü–∏–π

```bash
go test ./...
```

---

## üì¨ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ curl

> ‚ö†Ô∏è **–°–æ–≤–µ—Ç –æ—Ç –∞–≤—Ç–æ—Ä–∞:** –ø–æ–ª—å–∑—É–π—Ç–µ—Å—å **Postman** ‚Äî —ç—Ç–æ —Å–±–µ—Ä–µ–∂—ë—Ç –≤–∞–º –∫—É—á—É –Ω–µ—Ä–≤–æ–≤ üòÑ

> ‚úÖ **–í–∞–∂–Ω–æ:** —É–∫–∞–∑—ã–≤–∞–π—Ç–µ JWT-—Ç–æ–∫–µ–Ω –≤ Header:
> `Authorization: Bearer <–í–ê–®_–¢–û–ö–ï–ù>`

---

### üîê –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

```bash
curl -X POST http://localhost:8080/api/v1/register \
  -H "Content-Type: application/json" \
  -d '{"login": "pasha", "password": "1234"}'
```

### üîë –õ–æ–≥–∏–Ω

```bash
curl -X POST http://localhost:8080/api/v1/login \
  -H "Content-Type: application/json" \
  -d '{"login": "pasha", "password": "1234"}'
```

### ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è

```bash
curl -X POST http://localhost:8080/api/v1/calculate \
  --header "Authorization: Bearer <JWT_TOKEN>" \
  -H "Content-Type: application/json" \
  -d '{"expression": "3 * 4"}'
```

### üìÑ –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—ã—Ä–∞–∂–µ–Ω–∏–π

```bash
curl http://localhost:8080/api/v1/expressions \
  --header "Authorization: Bearer <JWT_TOKEN>"
```

---

## üß† –°—Ö–µ–º—ã

### [–°—Ö–µ–º–∞ –ë–î](https://www.drawdb.app/editor?shareId=73967a1adebeca62b1f2edef94ce2b1f)

![–°—Ö–µ–º–∞](imgs/DB.png)

### –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã

![–°—Ö–µ–º–∞](imgs/schema.png)

---

> üß° –°–ø–∞—Å–∏–±–æ, —á—Ç–æ –¥–æ—á–∏—Ç–∞–ª –¥–æ –∫–æ–Ω—Ü–∞!
> –ù–∞–¥–µ—é—Å—å, –º–æ–π –ø—Ä–æ–µ–∫—Ç –æ–∫–∞–∑–∞–ª—Å—è –ø–æ–ª–µ–∑–Ω—ã–º –∏–ª–∏ —Ö–æ—Ç—è –±—ã –ø—Ä–∏–∫–æ–ª—å–Ω—ã–º.
> –ù–∞–ø–∏—à–∏, –µ—Å–ª–∏ –±—É–¥—É—Ç –∏–¥–µ–∏ –∏–ª–∏ –±–∞–≥–∏ :)
